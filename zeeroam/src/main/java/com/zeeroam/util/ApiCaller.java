package com.zeeroam.util;

import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.http.HttpRequest.BodyPublishers;
import java.net.http.HttpResponse.BodyHandlers;
import java.util.List;

public class ApiCaller {

    private static final String API_URL = "https://pay.gomobi.io/payment/mobiezywayservice/jsonservice";

    public static void main(String[] args) {
        List<String> trxIds = List.of("90150058988954241",
        		"90140475742369255",
        		"90136540910052037",
        		"90130110434558475",
        		"90117604472938620",
        		"90111362760640095",
        		"90097974941760838",
        		"90095096369502138",
        		"90089686569402101",
        		"90089706420509397",
        		"90081500973987557",
        		"90081613908991733",
        		"90077081280022459",
        		"90073671291547983",
        		"90060218792219848",
        		"90050359664622180",
        		"90046427796809269",
        		"90042825485662994",
        		"90041608991097678",
        		"90027899413073177",
        		"90013130263752967",
        		"90005109711816582",
        		"89924745779302096",
        		"89924234107650468",
        		"89921728379744324",
        		"89889196981964823",
        		"89820052955187259",
        		"89810992184419225",
        		"89793884656772556",
        		"89789491830237450",
        		"89786337024066416",
        		"89766771702620967",
        		"89745877715418327",
        		"89733200548958548",
        		"89729071477494334",
        		"89721942737150189",
        		"89716419758777650",
        		"89712295896102652",
        		"89712570159878952",
        		"89712919452000741",
        		"89711458951349243",
        		"89690064974726527",
        		"89677633001559775",
        		"89671038963684882",
        		"89668016767926639",
        		"89656995312016877",
        		"89651561019561485",
        		"89651367108123918",
        		"89644986882941698",
        		"89639416189626211",
        		"89637324419613441",
        		"89635790697541839",
        		"89627259679635597",
        		"89623277379606712",
        		"89622253721793889",
        		"89615790429873371",
        		"89611046402066499",
        		"89602293588443800",
        		"89599502303611847",
        		"89591758120384582",
        		"89585502785715500",
        		"89583607516949203",
        		"89575546892746637",
        		"89566372841270871",
        		"89561578484141899",
        		"89547865088802607",
        		"89546201467972087",
        		"89523152000722223",
        		"89519095786016847",
        		"89508937845502411",
        		"89494556195905291",
        		"89488948850140561",
        		"89485568834965413",
        		"89484200463361836",
        		"89476061425817525",
        		"89474098835481213",
        		"89472976515245846",
        		"89471678304229392",
        		"89466869792010124",
        		"89465476546543128",
        		"89461895433976923",
        		"89449708986278869",
        		"89419125766848777",
        		"89408328802661765",
        		"89401912191934771",
        		"89390049460462615",
        		"89387883262418457",
        		"89377452216418443",
        		"89374532086913350",
        		"89366092514218856",
        		"89364011886638386",
        		"89361718245277697",
        		"89361070080537078",
        		"89360161555824462",
        		"89355102635592015",
        		"89353038181568037",
        		"89352484365733420",
        		"89350412994520357",
        		"89348079888116819",
        		"89343048860318375",
        		"89339897092288103",
        		"89332479425622337",
        		"89327947156631831",
        		"89323874486113807",
        		"89312872723052245",
        		"89311162753326003",
        		"89307500600277612",
        		"89306882895733009",
        		"89274093070565517",
        		"89262917953357085",
        		"89242393558469151",
        		"89215957042970157",
        		"89194905785720813",
        		"89192103065203443",
        		"89191579809777837",
        		"89190703410972022",
        		"89175736842084957",
        		"89149420837772057",
        		"89135449643894967",
        		"89123940549330084",
        		"89117635976927133",
        		"89095882342742111",
        		"89094510196002479",
        		"89077626210551837",
        		"89066016583063300",
        		"89055716678824952",
        		"89037189117886185",
        		"89030260608931314",
        		"88975978809606521",
        		"88944825945194433",
        		"88934258998724447",
        		"88903221413866653",
        		"88882132429714248",
        		"88878051426012750",
        		"88870564677553494",
        		"88870194389531545",
        		"88865520999332295",
        		"88862355029642725",
        		"88851265798113647",
        		"88826113797338579",
        		"88822028469495354",
        		"88820136822858002",
        		"88815534810173318",
        		"88812540582546535",
        		"88811719540532883",
        		"88808471941453658",
        		"88806553897036736",
        		"88804296743344027",
        		"88801783318671366",
        		"88799206824081080",
        		"88792639672490598",
        		"88787060990209940",
        		"88782839090425752",
        		"88772004044829607",
        		"88771413460970632",
        		"88750142641271959",
        		"88749008963202886",
        		"88712524935962277",
        		"88701619128812884",
        		"88685491747073342",
        		"88678152283057318",
        		"88664759496540785",
        		"88660406095518341",
        		"88659432416053332",
        		"88659263080644860",
        		"88657315516564302",
        		"88632573665527799",
        		"88615664295143387",
        		"88612159556484425",
        		"88609564202150384",
        		"88597217124493523",
        		"88596945243126845",
        		"88595662508863928",
        		"88587014663300132",
        		"88568992193729883",
        		"88567244846451692",
        		"88561258091377127",
        		"88544155611731837",
        		"88539052888819519",
        		"88532492235488518",
        		"88526236825383680",
        		"88525981026545451",
        		"88519923733656179",
        		"88508025540348520",
        		"88497783790591420",
        		"88480891440379150",
        		"88479375609845337",
        		"88476670858015308",
        		"88451788729311471",
        		"88448585869098520",
        		"88446868342823603",
        		"88445856239499604",
        		"88441415372627192",
        		"88440198001324040",
        		"88439222489661245",
        		"88439513989674625",
        		"88423692811497864",
        		"88420790326604041",
        		"88420723042024640",
        		"88417894683937112",
        		"88381821927795651",
        		"88380080281271996",
        		"88368217658039467",
        		"88363138632019000",
        		"88362341844789367",
        		"88357319288636549",
        		"88356652132646103",
        		"88350453006852299",
        		"88333699081796056",
        		"88327353818049656",
        		"88323261018169998",
        		"88306949298854799",
        		"88306166521115241",
        		"88303176691809484",
        		"88282762238696081",
        		"88278515625736415",
        		"88266343921252761",
        		"88261841397293743",
        		"88258755058718183",
        		"88253491211984612",
        		"88234602333293799",
        		"88219201009621216",
        		"88178231285385805",
        		"88157477174573028",
        		"88145622850858848",
        		"88133637196546836",
        		"88103994948900316",
        		"88098784404515899",
        		"88090264256878511",
        		"88059680133043103",
        		"88057774396691880",
        		"88037078704115029",
        		"88015545089907994",
        		"88009553178920157",
        		"87996114843207012",
        		"87972614220507569",
        		"87953834169217698",
        		"87939656830325298",
        		"87931218962277124",
        		"87928096778797781",
        		"87920354164306248",
        		"87918186787808323",
        		"87889668927943081",
        		"87876164768614705",
        		"87872466392008574",
        		"87865666867634171",
        		"87860026319274834",
        		"87857157915012370",
        		"87856869065285223",
        		"87853109789042797",
        		"87819247078667701",
        		"87805874775935796",
        		"87805937909218841",
        		"87799838257778964",
        		"87797467904562001",
        		"87788016145219904",
        		"87783913165505615",
        		"87779344661667905",
        		"87778938716128986",
        		"87767964099295997",
        		"87768242264845881",
        		"87757938307550965",
        		"87755894858343122",
        		"87752692117433913",
        		"87721771911634138",
        		"87722136635079532",
        		"87707325127780314",
        		"87697465446685455",
        		"87669521216791180",
        		"87666767778559845",
        		"87660264659493118",
        		"87651858680105806",
        		"87651177646249636",
        		"87647455909473557",
        		"87633523586055645",
        		"87627815888633014",
        		"87615855278313581",
        		"87607775105830229",
        		"87605405376022353",
        		"87599518812792690",
        		"87598588024747460",
        		"87593602290528184",
        		"87590085169566274",
        		"87582961712524376",
        		"87577101629218179",
        		"87576025622011631",
        		"87575769959978620",
        		"87562600559193010",
        		"87557089830175813",
        		"87547035614397092",
        		"87526797245491389",
        		"87519247790036030",
        		"87512199178738272",
        		"87509237063484589",
        		"87507229785765330",
        		"87503268037254739",
        		"87498237179468743",
        		"87493150381806821",
        		"87485044786649862",
        		"87484707536914395",
        		"87475391739248595",
        		"87445975535566320",
        		"87442866901738333",
        		"87442043719210463",
        		"87425033315425434",
        		"87399480852581073",
        		"87355403760490213",
        		"87345724646229936",
        		"87343532894895205",
        		"87339903200156846",
        		"87323190132499043",
        		"87282542721401617",
        		"87265369378817809",
        		"87214263331417314",
        		"87191131312786568",
        		"87161134979643003",
        		"87137825934057665",
        		"87133601357395252",
        		"87123507541855402",
        		"87115171598496170",
        		"87103245280752191",
        		"87098085901742008",
        		"87096111419047060",
        		"87091996944200779",
        		"87077477354157880",
        		"87052792368806192",
        		"87050852641770292",
        		"87047296371539665",
        		"87043245350839368",
        		"87038998699827638",
        		"87038442254885053",
        		"87036045882355019",
        		"87035573435966140",
        		"87030137845466102",
        		"87021436722509393",
        		"87020522992905899",
        		"87011641231728093",
        		"87002934026104054",
        		"86996718793920697",
        		"86993951869925224",
        		"86988969633362216",
        		"86981823304229435",
        		"86956134393413836",
        		"86946985583479306",
        		"86946411817176725",
        		"86945542938007794",
        		"86926938324597146",
        		"86924394998997257",
        		"86914491956469170",
        		"86913153187755832",
        		"86910708331558714",
        		"86907664183329123",
        		"86903264008229014",
        		"86898413465806759",
        		"86890378773456746",
        		"86886313537502036",
        		"86882928350383950",
        		"86882108742072468",
        		"86875158877590544",
        		"86871643347230775",
        		"86870478809565397",
        		"86869703214456228",
        		"86866218967085481",
        		"86862148170449568",
        		"86846865626286051",
        		"86844959679354841",
        		"86837095581253414",
        		"86835841093548300",
        		"86829739590847209",
        		"86822421141219900",
        		"86794355626841032",
        		"86785412373191060",
        		"86760878807616998",
        		"86756428178865430",
        		"86754404562337205",
        		"86748991062292038",
        		"86742715047080663",
        		"86739999123341802",
        		"86736044639462660",
        		"86734245273146848",
        		"86728686567863119",
        		"86723979957101801",
        		"86720396528482805",
        		"86714289160908674",
        		"86707387820784474",
        		"86707306743656049",
        		"86694072187547616",
        		"86673558515971275",
        		"86666804272339572",
        		"86660096600942070",
        		"86654114091477429",
        		"86654272026166457",
        		"86642346047854229",
        		"86638870067298856",
        		"86630622462596634",
        		"86612466196929196",
        		"86605156601224635",
        		"86587986598596120",
        		"86577948427513967",
        		"86577529326259769",
        		"86574387425784648",
        		"86558646556723109",
        		"86553568666552399",
        		"86514007705765058",
        		"86494546801117544",
        		"86486176052920998",
        		"86453371093533335",
        		"86449362111097764",
        		"86442093712217611",
        		"86431928863287058",
        		"86418029342862897",
        		"86416900298846039",
        		"86406985525019544",
        		"86392071421500568",
        		"86383973537614517",
        		"86377931170389837",
        		"86377464669360127",
        		"86361449173240038",
        		"86360314059678951",
        		"86339686871384415",
        		"86337642264414865",
        		"86335474006716601",
        		"86335109997552074",
        		"86328187924482358",
        		"86325684723815427",
        		"86315701534410263",
        		"86315325520212440",
        		"86302769692727708",
        		"86297305259190464",
        		"86293993691990593",
        		"86292481313151100",
        		"86287116193559579",
        		"86243331903316748",
        		"86243251260024331",
        		"86242225545773970",
        		"86239237281444240",
        		"86239458173120405",
        		"86235272799481123",
        		"86233643550971324",
        		"86231052788006592",
        		"86229455338706294",
        		"86225965360442422",
        		"86226059028391178",
        		"86222563460272733",
        		"86215991521373787",
        		"86207264902390873",
        		"86203236162674133",
        		"86196936786559797",
        		"86183701642450218",
        		"86177372120410294",
        		"86175274366708443",
        		"86153748976878064",
        		"86151273629958694",
        		"86149811447850620",
        		"86148592972457160",
        		"86146906847902980",
        		"86141983725770446",
        		"86141994706300798",
        		"86133967889390596",
        		"86114874861894459");

        hitApiForAllIds(trxIds);
    }

    public static void hitApiForAllIds(List<String> trxIds) {
        HttpClient client = HttpClient.newHttpClient();

        for (String trxId : trxIds) {
            String requestBody = String.format("""
                {
                    "service": "TNG_AND_SPP_STATUSECOM",
                    "trxId": "%s"
                }
                """, trxId);

            HttpRequest request = HttpRequest.newBuilder()
                    .uri(URI.create(API_URL))
                    .header("Content-Type", "application/json")
                    .POST(BodyPublishers.ofString(requestBody))
                    .build();

            try {
                HttpResponse<String> response = client.send(request, BodyHandlers.ofString());
                System.out.println("TrxId: " + trxId + " => Response: " + response.body());
                // Optional: Sleep or rate limit if needed
                Thread.sleep(100); // 100ms delay between requests
            } catch (Exception e) {
                System.err.println("Error for TrxId: " + trxId);
                e.printStackTrace();
            }
        }
    }
}

